\hypertarget{classvnfs__operations_1_1VNFSOperations}{\section{vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations Class Reference}
\label{classvnfs__operations_1_1VNFSOperations}\index{vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations}}
}


Provides a common set of operations for nfio.  


\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classvnfs__operations_1_1VNFSOperations_a8aeb0c031c7f7b97e8544ed7d8c49b35}{def {\bfseries \-\_\-\-\_\-init\-\_\-\-\_\-}}\label{classvnfs__operations_1_1VNFSOperations_a8aeb0c031c7f7b97e8544ed7d8c49b35}

\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_ae73c421b301cbda862896f9fe67a7941}{vnfs\-\_\-create\-\_\-vnf\-\_\-instance}
\begin{DoxyCompactList}\small\item\em Create the file system structure for a V\-N\-F. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a3c0b706c40d09a2ed679aed33d37b5e9}{vnfs\-\_\-get\-\_\-opcode}
\begin{DoxyCompactList}\small\item\em Determinse the type of operation based on the path. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a75430767bdb54f256059c588058b3323}{vnfs\-\_\-get\-\_\-nf\-\_\-type}
\begin{DoxyCompactList}\small\item\em Parse the type of V\-N\-F from path. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a9461289b4af0fef0db381e5ec17a6cac}{vnfs\-\_\-get\-\_\-file\-\_\-name}
\begin{DoxyCompactList}\small\item\em Return the name of the file represented by a path. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a464c0ebd7c574c62d76d352a3a59aec0}{vnfs\-\_\-is\-\_\-nf\-\_\-instance}
\begin{DoxyCompactList}\small\item\em Determines if a path represents an nf instance directory. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{vnfs\-\_\-get\-\_\-instance\-\_\-configuration}
\begin{DoxyCompactList}\small\item\em Return the configuration parameters related to a V\-N\-F instance. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a304bb0780682b050cdf9d43e3f279ead}{vnfs\-\_\-deploy\-\_\-nf}
\begin{DoxyCompactList}\small\item\em Deploys and S\-T\-A\-R\-T\-S a V\-N\-F instance. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a3c95617427fa157dbde8246a260546ed}{vnfs\-\_\-stop\-\_\-vnf}
\begin{DoxyCompactList}\small\item\em Stops a V\-N\-F instance. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a1f88fc97d23ebfac8a99a71542ca5219}{vnfs\-\_\-start\-\_\-vnf}
\begin{DoxyCompactList}\small\item\em Starts a deployed V\-N\-F instance. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a54389b0c8a5a740746816e3c99066685}{vnfs\-\_\-destroy\-\_\-vnf}
\begin{DoxyCompactList}\small\item\em Destroys a deployed V\-N\-F instance. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a27409856538f49f14a8506635ded95b7}{vnfs\-\_\-get\-\_\-rx\-\_\-bytes}
\begin{DoxyCompactList}\small\item\em Reads the number of bytes received by a V\-N\-F instance. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_ab4617f4573ef7d6c4106b0fdbf728022}{vnfs\-\_\-get\-\_\-tx\-\_\-bytes}
\begin{DoxyCompactList}\small\item\em Reads the number of bytes sent by a V\-N\-F instance. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a05a7ab8ae7e8a2ab7502a1d4e0113144}{vnfs\-\_\-get\-\_\-pkt\-\_\-drops}
\begin{DoxyCompactList}\small\item\em Reads the number of packets dropped by a V\-N\-F instance. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_ac2787ee33d5944c39a07321e270bdcfd}{vnfs\-\_\-get\-\_\-status}
\begin{DoxyCompactList}\small\item\em Get the status of a V\-N\-F instance, e.\-g., the V\-N\-F is running/suspended/stopped etc. \end{DoxyCompactList}\item 
def \hyperlink{classvnfs__operations_1_1VNFSOperations_a482dc96295584a1ca84300f04d000f26}{vnfs\-\_\-get\-\_\-ip}
\begin{DoxyCompactList}\small\item\em Get the status of a V\-N\-F instance, e.\-g., the V\-N\-F is running/suspended/stopped etc. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classvnfs__operations_1_1VNFSOperations_a88ae8c710ff0d9f76a72d2da2d736e34}{{\bfseries vnfs\-\_\-root}}\label{classvnfs__operations_1_1VNFSOperations_a88ae8c710ff0d9f76a72d2da2d736e34}

\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classvnfs__operations_1_1VNFSOperations_a4477fd75c80184251d2894d71e3dee5e}{int {\bfseries O\-P\-\_\-\-U\-N\-D\-E\-F\-I\-N\-E\-D} = 0x\-F\-F}\label{classvnfs__operations_1_1VNFSOperations_a4477fd75c80184251d2894d71e3dee5e}

\item 
\hypertarget{classvnfs__operations_1_1VNFSOperations_a1cde1da5a03e27b526f1a71e2a6244ff}{int {\bfseries O\-P\-\_\-\-N\-F} = 0x01}\label{classvnfs__operations_1_1VNFSOperations_a1cde1da5a03e27b526f1a71e2a6244ff}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Provides a common set of operations for nfio. 

These operations act as a helper. 

Definition at line 25 of file vnfs\-\_\-operations.\-py.



\subsection{Member Function Documentation}
\hypertarget{classvnfs__operations_1_1VNFSOperations_ae73c421b301cbda862896f9fe67a7941}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-create\-\_\-vnf\-\_\-instance@{vnfs\-\_\-create\-\_\-vnf\-\_\-instance}}
\index{vnfs\-\_\-create\-\_\-vnf\-\_\-instance@{vnfs\-\_\-create\-\_\-vnf\-\_\-instance}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-create\-\_\-vnf\-\_\-instance}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-create\-\_\-vnf\-\_\-instance (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{path, }
\item[{}]{mode}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_ae73c421b301cbda862896f9fe67a7941}


Create the file system structure for a V\-N\-F. 

Args\-: path\-: path of the new V\-N\-F instance. mode\-: file creation mode for the new V\-N\-F instance directory.

Returns\-: returns the return code of os.\-mkdir 

Definition at line 52 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
52 
53     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_ae73c421b301cbda862896f9fe67a7941}{vnfs\_create\_vnf\_instance}(self, path, mode):
54         logger.info(\textcolor{stringliteral}{'Creating file/directory structure in '} + path)
55         full\_path = self.\hyperlink{classvnfs__operations_1_1VNFSOperations_ac5bd7d7dee80807e14bd3d4446603e32}{\_full\_path}(path)
56         result = os.mkdir(full\_path)
57         default\_file\_mode = 0o644
58         os.open(
59             full\_path +
60             \textcolor{stringliteral}{"/status"},
61             os.O\_WRONLY | os.O\_CREAT,
62             default\_file\_mode)
63 
64         os.mkdir(full\_path + \textcolor{stringliteral}{"/config"}, mode)
65         os.open(full\_path + \textcolor{stringliteral}{"/config/boot.conf"}, os.O\_WRONLY | os.O\_CREAT,
66                 default\_file\_mode)
67         os.mkdir(full\_path + \textcolor{stringliteral}{"/machine"}, mode)
68         os.open(full\_path + \textcolor{stringliteral}{"/machine/ip"}, os.O\_WRONLY | os.O\_CREAT,
69                 default\_file\_mode)
70         os.open(full\_path + \textcolor{stringliteral}{"/machine/vm.vcpu"}, os.O\_WRONLY | os.O\_CREAT,
71                 default\_file\_mode)
72         os.open(full\_path + \textcolor{stringliteral}{"/machine/vm.memory"}, os.O\_WRONLY | os.O\_CREAT,
73                 default\_file\_mode)
74         os.open(full\_path + \textcolor{stringliteral}{"/machine/vm.image"}, os.O\_WRONLY | os.O\_CREAT,
75                 default\_file\_mode)
76         os.open(full\_path + \textcolor{stringliteral}{"/machine/vm.ip"}, os.O\_WRONLY | os.O\_CREAT,
77                 default\_file\_mode)
78         os.open(full\_path + \textcolor{stringliteral}{"/action"}, os.O\_WRONLY | os.O\_CREAT,
79                 default\_file\_mode)
80 
81         default\_file\_mode = 0o444
82         os.mkdir(full\_path + \textcolor{stringliteral}{"/stats"}, mode)
83         os.open(full\_path + \textcolor{stringliteral}{"/stats/rx\_bytes"}, os.O\_WRONLY | os.O\_CREAT,
84                 default\_file\_mode)
85         os.open(full\_path + \textcolor{stringliteral}{"/stats/tx\_bytes"}, os.O\_WRONLY | os.O\_CREAT,
86                 default\_file\_mode)
87         os.open(full\_path + \textcolor{stringliteral}{"/stats/pkt\_drops"}, os.O\_WRONLY | os.O\_CREAT,
88                 default\_file\_mode)
89         logger.info(\textcolor{stringliteral}{'Finished creating file/directory structure in '} + path)
90         \textcolor{keywordflow}{return} result

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a304bb0780682b050cdf9d43e3f279ead}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-deploy\-\_\-nf@{vnfs\-\_\-deploy\-\_\-nf}}
\index{vnfs\-\_\-deploy\-\_\-nf@{vnfs\-\_\-deploy\-\_\-nf}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-deploy\-\_\-nf}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-deploy\-\_\-nf (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nf\-\_\-path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a304bb0780682b050cdf9d43e3f279ead}


Deploys and S\-T\-A\-R\-T\-S a V\-N\-F instance. 

Args\-: nf\-\_\-path\-: path of the V\-N\-F instance.

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 207 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
207 
208     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a304bb0780682b050cdf9d43e3f279ead}{vnfs\_deploy\_nf}(self, nf\_path):
209         logger.info(\textcolor{stringliteral}{'Deploying new VNF at '} + nf\_path)
210         nf\_instance\_name, nf\_type, ip\_address, image\_name = self.
      \hyperlink{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{vnfs\_get\_instance\_configuration}(nf\_path)
211         \textcolor{keywordflow}{try}:
212             cont\_id  = self.\_hypervisor.deploy(
213                 ip\_address, getpass.getuser(), image\_name, nf\_instance\_name)
214             logger.debug(cont\_id)
215         \textcolor{keywordflow}{except} \hyperlink{classerrors_1_1VNFDeployError}{errors.VNFDeployError}:
216             logger.info(\textcolor{stringliteral}{'Instance: '} + nf\_instance\_name  + \textcolor{stringliteral}{' deployment failed'})
217         \textcolor{keywordflow}{else}:
218             logger.info(\textcolor{stringliteral}{'Instance: '} + nf\_instance\_name  
219                     + \textcolor{stringliteral}{' successfully deployed'})
220             \textcolor{keywordflow}{try}:
221                 logger.info(\textcolor{stringliteral}{'Starting the deployed VNF instance: '} 
222                     + nf\_instance\_name)
223                 self.\_hypervisor.start(ip\_address, cont\_id)
224             \textcolor{keywordflow}{except} \hyperlink{classerrors_1_1VNFStartError}{errors.VNFStartError}:
225                 logger.info(\textcolor{stringliteral}{'Instance: '} + nf\_instance\_name  + \textcolor{stringliteral}{' start failed'})
226                 \textcolor{comment}{# destroy the deployed VNF}
227                 self.\_hypervisor.destroy(ip\_address, cont\_id)
228                 logger.info(\textcolor{stringliteral}{'Instance: '} + nf\_instance\_name  
229                     + \textcolor{stringliteral}{' destroyed'})
230             \textcolor{keywordflow}{else}:
231                 logger.info(\textcolor{stringliteral}{'Instance: '} + nf\_instance\_name  
232                     + \textcolor{stringliteral}{' successfully deployed and started'})

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a54389b0c8a5a740746816e3c99066685}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-destroy\-\_\-vnf@{vnfs\-\_\-destroy\-\_\-vnf}}
\index{vnfs\-\_\-destroy\-\_\-vnf@{vnfs\-\_\-destroy\-\_\-vnf}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-destroy\-\_\-vnf}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-destroy\-\_\-vnf (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nf\-\_\-path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a54389b0c8a5a740746816e3c99066685}


Destroys a deployed V\-N\-F instance. 

Args\-: nf\-\_\-path\-: path of the V\-N\-F instance.

Returns\-: return codes are described in hypervisor.\-hypervisor\-\_\-return\-\_\-codes module. 

Definition at line 278 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
278 
279     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a54389b0c8a5a740746816e3c99066685}{vnfs\_destroy\_vnf}(self, nf\_path):
280         logger.info(\textcolor{stringliteral}{"Destroying VNF at "} + nf\_path)
281         nf\_instance\_name, nf\_type, ip\_address, image\_name = self.
      \hyperlink{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{vnfs\_get\_instance\_configuration}(
282             nf\_path)
283         self.\_hypervisor.destroy(ip\_address, getpass.getuser(), nf\_instance\_name)
284         logger.info(\textcolor{stringliteral}{'Instance: '} + nf\_instance\_name + \textcolor{stringliteral}{' successfully destroyed'})

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a9461289b4af0fef0db381e5ec17a6cac}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-get\-\_\-file\-\_\-name@{vnfs\-\_\-get\-\_\-file\-\_\-name}}
\index{vnfs\-\_\-get\-\_\-file\-\_\-name@{vnfs\-\_\-get\-\_\-file\-\_\-name}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-get\-\_\-file\-\_\-name}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-get\-\_\-file\-\_\-name (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a9461289b4af0fef0db381e5ec17a6cac}


Return the name of the file represented by a path. 

Args\-: path\-: the path of the file in concern

Returns\-: returns the name of the file, i.\-e., last token after / in the path. 

Definition at line 141 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
141 
142     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a9461289b4af0fef0db381e5ec17a6cac}{vnfs\_get\_file\_name}(self, path):
143 
144         \textcolor{keywordflow}{return} path.split(\textcolor{stringliteral}{'/'})[-1]

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-get\-\_\-instance\-\_\-configuration@{vnfs\-\_\-get\-\_\-instance\-\_\-configuration}}
\index{vnfs\-\_\-get\-\_\-instance\-\_\-configuration@{vnfs\-\_\-get\-\_\-instance\-\_\-configuration}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-get\-\_\-instance\-\_\-configuration}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-get\-\_\-instance\-\_\-configuration (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nf\-\_\-path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}


Return the configuration parameters related to a V\-N\-F instance. 

Args\-: nf\-\_\-path\-: path of the V\-N\-F instance. e.\-g., /mnt/vnfsmnt/firewall/fw-\/alpha

Returns\-: A tuple representing the configuration of the V\-N\-F instance. The tuple is organized in the following order\-: nf\-\_\-instance\-\_\-name\-: name of the V\-N\-F instance. nf\-\_\-type\-: type of the V\-N\-F. ip\-\_\-address\-: I\-P address of the machine where this V\-N\-F will be deployed. image\-\_\-name\-: name of the V\-M/container image for that V\-N\-F. 

Definition at line 184 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
184 
185     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{vnfs\_get\_instance\_configuration}(self, nf\_path):
186         nf\_instance\_name = self.\hyperlink{classvnfs__operations_1_1VNFSOperations_a9461289b4af0fef0db381e5ec17a6cac}{vnfs\_get\_file\_name}(nf\_path)
187         nf\_type = self.\hyperlink{classvnfs__operations_1_1VNFSOperations_a75430767bdb54f256059c588058b3323}{vnfs\_get\_nf\_type}(nf\_path)
188         ip\_address = \textcolor{stringliteral}{''}
189         logger.debug(nf\_path + \textcolor{stringliteral}{'/machine/ip'})
190         with open(nf\_path + \textcolor{stringliteral}{'/machine/ip'}) \textcolor{keyword}{as} ip\_fd:
191             ip\_address = ip\_fd.readline().rstrip(\textcolor{stringliteral}{'\(\backslash\)n'})
192         image\_name = \textcolor{stringliteral}{''}
193         with open(nf\_path + \textcolor{stringliteral}{'/machine/vm.image'}) \textcolor{keyword}{as} img\_fd:
194             image\_name = img\_fd.readline().rstrip(\textcolor{stringliteral}{'\(\backslash\)n'})
195         logger.info(\textcolor{stringliteral}{"Instance name: "} + nf\_instance\_name + \textcolor{stringliteral}{", type: "} 
196             + nf\_type + \textcolor{stringliteral}{", host-ip: "} + ip\_address + \textcolor{stringliteral}{" VNF image: "} + image\_name)
197         \textcolor{keywordflow}{return} nf\_instance\_name, nf\_type, ip\_address, image\_name

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a482dc96295584a1ca84300f04d000f26}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-get\-\_\-ip@{vnfs\-\_\-get\-\_\-ip}}
\index{vnfs\-\_\-get\-\_\-ip@{vnfs\-\_\-get\-\_\-ip}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-get\-\_\-ip}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-get\-\_\-ip (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nf\-\_\-path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a482dc96295584a1ca84300f04d000f26}


Get the status of a V\-N\-F instance, e.\-g., the V\-N\-F is running/suspended/stopped etc. 

Args\-: nf\-\_\-path\-: path of the V\-N\-F instance.

Returns\-: Hypervisor specific status of the V\-N\-F. For example, if Docker is being used for V\-N\-F deployment then Docker specific container status message is returned. 

Definition at line 390 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
390 
391     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a482dc96295584a1ca84300f04d000f26}{vnfs\_get\_ip}(self, nf\_path):
392         logger.info(\textcolor{stringliteral}{'Reading ip at '} + nf\_path)
393         nf\_instance\_name, nf\_type, ip\_address, image\_name = self.
      \hyperlink{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{vnfs\_get\_instance\_configuration}(
394             nf\_path)
395         cont\_ip = self.\_hypervisor.get\_ip(ip\_address, getpass.getuser(), nf\_instance\_name)
396         logger.debug(\textcolor{stringliteral}{'cont\_ip '} + cont\_ip)
397         logger.info(\textcolor{stringliteral}{'Successfully read ip'})
398         \textcolor{keywordflow}{return} cont\_ip
399 
\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a75430767bdb54f256059c588058b3323}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-get\-\_\-nf\-\_\-type@{vnfs\-\_\-get\-\_\-nf\-\_\-type}}
\index{vnfs\-\_\-get\-\_\-nf\-\_\-type@{vnfs\-\_\-get\-\_\-nf\-\_\-type}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-get\-\_\-nf\-\_\-type}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-get\-\_\-nf\-\_\-type (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a75430767bdb54f256059c588058b3323}


Parse the type of V\-N\-F from path. 

Args\-: path\-: the path of the file/directory on which some operation is being performed.

Returns\-: Returns the type of V\-N\-F parsed from the path, e.\-g., if the path is /mnt/vnfsroot/nf-\/types/firewall/fw-\/alpha/action then returns firewall. 

Definition at line 122 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
122 
123     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a75430767bdb54f256059c588058b3323}{vnfs\_get\_nf\_type}(self, path):
124         tokens = self.\hyperlink{classvnfs__operations_1_1VNFSOperations_ac5bd7d7dee80807e14bd3d4446603e32}{\_full\_path}(path).encode(\textcolor{stringliteral}{'ascii'}).split(\textcolor{stringliteral}{'/'})
125         \textcolor{keywordflow}{try}:
126             \textcolor{keywordflow}{return} tokens[tokens.index(\textcolor{stringliteral}{"nf-types"}) + 1]
127         \textcolor{keywordflow}{except} ValueError:
128             \textcolor{keywordflow}{return} \textcolor{stringliteral}{""}
129         \textcolor{keywordflow}{except} IndexError:
130             \textcolor{keywordflow}{return} \textcolor{stringliteral}{""}

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a3c0b706c40d09a2ed679aed33d37b5e9}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-get\-\_\-opcode@{vnfs\-\_\-get\-\_\-opcode}}
\index{vnfs\-\_\-get\-\_\-opcode@{vnfs\-\_\-get\-\_\-opcode}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-get\-\_\-opcode}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-get\-\_\-opcode (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a3c0b706c40d09a2ed679aed33d37b5e9}


Determinse the type of operation based on the path. 

Args\-: path\-: path to the file/directory on which the operation is being performed

Returns\-: If the file is under nf-\/types subdirectory in the nfio mount, then returns O\-P\-\_\-\-N\-F. Otherwise, returns O\-P\-\_\-\-U\-N\-D\-E\-F\-I\-N\-E\-D. 

Definition at line 103 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
103 
104     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a3c0b706c40d09a2ed679aed33d37b5e9}{vnfs\_get\_opcode}(self, path):
105         tokens = self.\hyperlink{classvnfs__operations_1_1VNFSOperations_ac5bd7d7dee80807e14bd3d4446603e32}{\_full\_path}(path).encode(\textcolor{stringliteral}{'ascii'}).split(\textcolor{stringliteral}{'/'})
106         \textcolor{keywordflow}{if} \textcolor{stringliteral}{"nf-types"} \textcolor{keywordflow}{in} tokens:
107             \textcolor{keywordflow}{return} VNFSOperations.OP\_NF
108         \textcolor{keywordflow}{return} VNFSOperations.OP\_UNDEFINED

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a05a7ab8ae7e8a2ab7502a1d4e0113144}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-get\-\_\-pkt\-\_\-drops@{vnfs\-\_\-get\-\_\-pkt\-\_\-drops}}
\index{vnfs\-\_\-get\-\_\-pkt\-\_\-drops@{vnfs\-\_\-get\-\_\-pkt\-\_\-drops}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-get\-\_\-pkt\-\_\-drops}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-get\-\_\-pkt\-\_\-drops (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nf\-\_\-path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a05a7ab8ae7e8a2ab7502a1d4e0113144}


Reads the number of packets dropped by a V\-N\-F instance. 

Args\-: nf\-\_\-path\-: path of the V\-N\-F instance.

Returns\-: returns the number of packets dropped by a V\-N\-F instance. 

Definition at line 339 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
339 
340     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a05a7ab8ae7e8a2ab7502a1d4e0113144}{vnfs\_get\_pkt\_drops}(self, nf\_path):
341         logger.info(\textcolor{stringliteral}{'Reading pkt\_drops at '} + nf\_path)
342         nf\_instance\_name, nf\_type, ip\_address, image\_name = self.
      \hyperlink{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{vnfs\_get\_instance\_configuration}(
343             nf\_path)
344         command = \textcolor{stringliteral}{"ifconfig eth0 | grep -Eo 'RX .* dropped:[0-9]+' | cut -d':' -f 4"}
345         response = self.\_hypervisor.execute\_in\_guest(
346             ip\_address,
347             getpass.getuser(), nf\_instance\_name,
348             command)
349         logger.info(\textcolor{stringliteral}{'Successfully read pkt\_drops'})
350         \textcolor{keywordflow}{return} response

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a27409856538f49f14a8506635ded95b7}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-get\-\_\-rx\-\_\-bytes@{vnfs\-\_\-get\-\_\-rx\-\_\-bytes}}
\index{vnfs\-\_\-get\-\_\-rx\-\_\-bytes@{vnfs\-\_\-get\-\_\-rx\-\_\-bytes}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-get\-\_\-rx\-\_\-bytes}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-get\-\_\-rx\-\_\-bytes (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nf\-\_\-path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a27409856538f49f14a8506635ded95b7}


Reads the number of bytes received by a V\-N\-F instance. 

Args\-: nf\-\_\-path\-: path of the V\-N\-F instance.

Returns\-: returns the number of bytes received by a V\-N\-F instance. 

Definition at line 295 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
295 
296     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a27409856538f49f14a8506635ded95b7}{vnfs\_get\_rx\_bytes}(self, nf\_path):
297         logger.info(\textcolor{stringliteral}{'Reading rx\_bytes at '} + nf\_path)
298         nf\_instance\_name, nf\_type, ip\_address, image\_name = self.
      \hyperlink{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{vnfs\_get\_instance\_configuration}(
299             nf\_path)
300         command = \textcolor{stringliteral}{"ifconfig eth0 | grep -Eo 'RX bytes:[0-9]+' | cut -d':' -f 2"}
301         response = self.\_hypervisor.execute\_in\_guest(
302             ip\_address,
303             getpass.getuser(), nf\_instance\_name,
304             command)
305         logger.info(\textcolor{stringliteral}{'Successfully read rx\_bytes'})
306         \textcolor{keywordflow}{return} response

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_ac2787ee33d5944c39a07321e270bdcfd}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-get\-\_\-status@{vnfs\-\_\-get\-\_\-status}}
\index{vnfs\-\_\-get\-\_\-status@{vnfs\-\_\-get\-\_\-status}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-get\-\_\-status}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-get\-\_\-status (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nf\-\_\-path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_ac2787ee33d5944c39a07321e270bdcfd}


Get the status of a V\-N\-F instance, e.\-g., the V\-N\-F is running/suspended/stopped etc. 

Args\-: nf\-\_\-path\-: path of the V\-N\-F instance.

Returns\-: Hypervisor specific status of the V\-N\-F. For example, if Docker is being used for V\-N\-F deployment then Docker specific container status message is returned. 

Definition at line 364 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
364 
365     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_ac2787ee33d5944c39a07321e270bdcfd}{vnfs\_get\_status}(self, nf\_path):
366         logger.info(\textcolor{stringliteral}{'Reading status at '} + nf\_path)
367         nf\_instance\_name, nf\_type, ip\_address, image\_name = self.
      \hyperlink{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{vnfs\_get\_instance\_configuration}(
368             nf\_path)
369         response = \textcolor{stringliteral}{''}
370         \textcolor{keywordflow}{try}:
371             response = self.\_hypervisor.guest\_status(ip\_address, getpass.getuser(), 
372                 nf\_instance\_name)
373         \textcolor{keywordflow}{except} \hyperlink{classerrors_1_1VNFNotFoundError}{errors.VNFNotFoundError}:
374             logger.info(\textcolor{stringliteral}{'Instance: '} + nf\_instance\_name + \textcolor{stringliteral}{' does not exist'})
375         logger.info(\textcolor{stringliteral}{'Successfully read status'})
376         \textcolor{keywordflow}{return} response

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_ab4617f4573ef7d6c4106b0fdbf728022}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-get\-\_\-tx\-\_\-bytes@{vnfs\-\_\-get\-\_\-tx\-\_\-bytes}}
\index{vnfs\-\_\-get\-\_\-tx\-\_\-bytes@{vnfs\-\_\-get\-\_\-tx\-\_\-bytes}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-get\-\_\-tx\-\_\-bytes}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-get\-\_\-tx\-\_\-bytes (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nf\-\_\-path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_ab4617f4573ef7d6c4106b0fdbf728022}


Reads the number of bytes sent by a V\-N\-F instance. 

Args\-: nf\-\_\-path\-: path of the V\-N\-F instance.

Returns\-: returns the number of bytes sent by a V\-N\-F instance. 

Definition at line 317 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
317 
318     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_ab4617f4573ef7d6c4106b0fdbf728022}{vnfs\_get\_tx\_bytes}(self, nf\_path):
319         logger.info(\textcolor{stringliteral}{'Reading tx\_bytes at '} + nf\_path)
320         nf\_instance\_name, nf\_type, ip\_address, image\_name = self.
      \hyperlink{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{vnfs\_get\_instance\_configuration}(
321             nf\_path)
322         command = \textcolor{stringliteral}{"ifconfig eth0 | grep -Eo 'TX bytes:[0-9]+' | cut -d':' -f 2"}
323         response = self.\_hypervisor.execute\_in\_guest(
324             ip\_address,
325             getpass.getuser(), nf\_instance\_name,
326             command)
327         logger.info(\textcolor{stringliteral}{'Successfully read tx\_bytes'})
328         \textcolor{keywordflow}{return} response

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a464c0ebd7c574c62d76d352a3a59aec0}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-is\-\_\-nf\-\_\-instance@{vnfs\-\_\-is\-\_\-nf\-\_\-instance}}
\index{vnfs\-\_\-is\-\_\-nf\-\_\-instance@{vnfs\-\_\-is\-\_\-nf\-\_\-instance}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-is\-\_\-nf\-\_\-instance}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-is\-\_\-nf\-\_\-instance (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a464c0ebd7c574c62d76d352a3a59aec0}


Determines if a path represents an nf instance directory. 

Args\-: path\-: path of the file/directory in concern.

Returns\-: True\-: if path represents an nf instance directory. For example, if path is /mnt/vnfsmnt/nf-\/types/firewall/fw-\/alpha then returns True.

False\-: if the path does not represent an nf instance directory. For example, if path is /mnt/vnfsmnt/nf-\/types/firewall/fw-\/alpha/action then returns False. 

Definition at line 160 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
160 
161     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a464c0ebd7c574c62d76d352a3a59aec0}{vnfs\_is\_nf\_instance}(self, path):
162         tokens = self.\hyperlink{classvnfs__operations_1_1VNFSOperations_ac5bd7d7dee80807e14bd3d4446603e32}{\_full\_path}(path).encode(\textcolor{stringliteral}{'ascii'}).split(\textcolor{stringliteral}{'/'})
163         \textcolor{keywordflow}{if} (\textcolor{stringliteral}{'nf-types'} \textcolor{keywordflow}{in} tokens) \textcolor{keywordflow}{and} len(tokens) > tokens.index(\textcolor{stringliteral}{'nf-types'}) + \(\backslash\)
164                 1:
165             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
166         \textcolor{keywordflow}{return} \textcolor{keyword}{False}

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a1f88fc97d23ebfac8a99a71542ca5219}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-start\-\_\-vnf@{vnfs\-\_\-start\-\_\-vnf}}
\index{vnfs\-\_\-start\-\_\-vnf@{vnfs\-\_\-start\-\_\-vnf}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-start\-\_\-vnf}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-start\-\_\-vnf (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nf\-\_\-path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a1f88fc97d23ebfac8a99a71542ca5219}


Starts a deployed V\-N\-F instance. 

Args\-: nf\-\_\-path\-: path of the V\-N\-F instance.

Returns\-: return codes are described in hypervisor.\-hypervisor\-\_\-return\-\_\-codes module. 

Definition at line 260 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
260 
261     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a1f88fc97d23ebfac8a99a71542ca5219}{vnfs\_start\_vnf}(self, nf\_path):
262         logger.info(\textcolor{stringliteral}{"Starting VNF at "} + nf\_path)
263         nf\_instance\_name, nf\_type, ip\_address, image\_name = self.
      \hyperlink{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{vnfs\_get\_instance\_configuration}(
264             nf\_path)
265         self.\_hypervisor.start(ip\_address, getpass.getuser(), nf\_instance\_name)
266         logger.info(\textcolor{stringliteral}{'Instance: '} + nf\_instance\_name + \textcolor{stringliteral}{' successfully started'})

\end{DoxyCode}
\hypertarget{classvnfs__operations_1_1VNFSOperations_a3c95617427fa157dbde8246a260546ed}{\index{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}!vnfs\-\_\-stop\-\_\-vnf@{vnfs\-\_\-stop\-\_\-vnf}}
\index{vnfs\-\_\-stop\-\_\-vnf@{vnfs\-\_\-stop\-\_\-vnf}!vnfs_operations::VNFSOperations@{vnfs\-\_\-operations\-::\-V\-N\-F\-S\-Operations}}
\subsubsection[{vnfs\-\_\-stop\-\_\-vnf}]{\setlength{\rightskip}{0pt plus 5cm}def vnfs\-\_\-operations.\-V\-N\-F\-S\-Operations.\-vnfs\-\_\-stop\-\_\-vnf (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{nf\-\_\-path}
\end{DoxyParamCaption}
)}}\label{classvnfs__operations_1_1VNFSOperations_a3c95617427fa157dbde8246a260546ed}


Stops a V\-N\-F instance. 

Args\-: nf\-\_\-path\-: path of the V\-N\-F instance.

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 242 of file vnfs\-\_\-operations.\-py.


\begin{DoxyCode}
242 
243     \textcolor{keyword}{def }\hyperlink{classvnfs__operations_1_1VNFSOperations_a3c95617427fa157dbde8246a260546ed}{vnfs\_stop\_vnf}(self, nf\_path):
244         logger.info(\textcolor{stringliteral}{"Stopping VNF at "} + nf\_path)
245         nf\_instance\_name, nf\_type, ip\_address, image\_name = self.
      \hyperlink{classvnfs__operations_1_1VNFSOperations_a367f1d6fb6749b0a16af47381d43c874}{vnfs\_get\_instance\_configuration}(
246             nf\_path)
247         self.\_hypervisor.stop(ip\_address, getpass.getuser(), nf\_instance\_name )
248         logger.info(\textcolor{stringliteral}{'Instance: '} + nf\_instance\_name + \textcolor{stringliteral}{' successfully stopped'})

\end{DoxyCode}


The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
Wat\-N\-F\-V/nf.\-io/src/vnfs\-\_\-operations.\-py\end{DoxyCompactItemize}
