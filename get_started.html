
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>nf.io: A File System Abstraction for NFV Orchestration</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap.min.css" rel="stylesheet">
    <style>
      a.anchor {display: block; position: relative; top: -45px; visibility: hidden;}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-73076941-1', 'auto');
    ga('send', 'pageview');
    </script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">nf.io</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <!--<li><a href="demo.html">Demo</a></li>-->
            <li><a href="get_started.html">Get Started</a></li>
            <li><a href="downloads.html">Downloads</a></li>
            <li><a href="docs/html/index.html" target="_blank">Documentation</a></li>
            <li><a href="developers.html">Developers</a></li>
            <li><a href="credits.html">Credits</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

      <!-- Main component for a primary marketing message or call to action -->
      <div class="jumbotron">
        <br />
        <h2>Get Started</h2>
        <big>There are two ways to get started with nf.io.</big>
        <ul>
          <li><strong>Option 1:&nbsp;</strong>Download a pre-packaged VirtualBox Appliance for nf.io
            <ul>
              <li>Download the appliance from <a href="http://nsm1.cs.uwaterloo.ca/nf.io/nfio-vbox-image.ova" target="_blank">here</a></li>
              <li>Import the appliance in VirtualBox. Instructions can be found <a href="https://www.google.ca/search?q=how+to+import+.ova+files+in+virtualbox" target="_blank">here</a>
              <li>username/password: nfuser/nfpass</li>
              <li>update the nf.io git repository<br />
                <code>cd ~/nf.io && git pull</code>
              </li>
              <li>check out the tag v0.1.1<br />
                <code>git checkout tags/v.0.1.1</code>
              </li>
              <li>update the nf.io-docker-images git repository<br />
                <code>cd ~/nf.io-docker-images && git pull</code>
              </li> 
            </ul>
          </li>
          <li><strong>Option 2:&nbsp;</strong>Install from source
            <ul>
              <li>Step 0: It is assumed that you are starting from a fresh Ubuntu installation. nf.io has been tested on ubuntu 14.04 and 15.04. It should run on other versions as long as the following dependencies are satisfied:
                <ul>
                  <li>python 2</li>
                  <li>FUSE 2.6.0 or above</li>
                  <li>Docker python client version 1.1.0: <a href="https://github.com/docker/docker-py/tree/1.1.0" target="_blank">docker-py</a></li>
                  <li>Docker remote API 1.15. Support for other versions will be added in the future.</li>
                </ul>
              </li>
              <li>Step 1: Install the following tools/utilities: 
                  <ul>
                    <li>git</li>
                    <li>wget</li>
                    <li>python-pip</li>
                  </ul>
                  <code>sudo apt-get install git wget python-pip</code>
              </li>
              <li>Step 2: Install FUSE. Follow the instructions on <a href="https://github.com/libfuse/libfuse" target="_blank">github.com: libfuse</a>
              </li>
              <li>Step 3: Add your username to the group fuse<br />
                  <code>sudo addgroup &lt;username&gt; fuse</code><br />
                  Log out of the machine and back in for this to take effect!
              </li>
              <li>Step 4: Install Docker. Follow the instruction on <a href="https://docs.docker.com/linux/step_one/" target="_blank">docker.com: Install Docker</a><br />
              Add your user to the "docker" group<br />
              <code> sudo addgroup &lt;username&gt; docker</code><br />
              Log out of the machine again and back in for this to take effect!
              </li>
              <li>Step 5: Install the <a href="https://github.com/docker/docker-py" target="_blank">docker-py</a> client 1.1.0<br />
              <code>sudo pip install docker-py==1.1.0</code><br />
              Run the following command to allow remote API calls<br />
              <code>sudo sed -i 's@.*DOCKER_OPTS=.*@DOCKER_OPTS="--ipv6=true -H unix:///var/run/docker.sock -H tcp://0.0.0.0:4444"@g' /etc/default/docker</code><br />
              <i>Note: we need to enable ipv6 network here as some VNFs (e.g., ufw) require ipv6 kernel modules.</i><br />
              Restart the Docker daemon<br />
              <code>sudo service docker restart</code>
              </li>
              <li>Step 6: Clone the nf.io Git repository<br />
                  <code>git clone https://github.com/WatNFV/nf.io.git</code>
              </li>
              <li>Step 7: Create the initial directories for nf.io<br />
                  <code>sudo mkdir /vnfsroot</code><br />
                  <code>sudo mkdir -p /vnfsroot/nf-types</code><br />
                  <code>sudo chown -R &lt;username&gt;:&lt;username&gt; /vnfsroot</code><br />
                  <code>sudo mkdir /nfio</code><br />
                  <code>sudo chown -R &lt;username&gt;:&lt;username&gt; /nfio</code><br />
              </li>
            </ul>
          </li>
        </ul>

        <h3>Build Docker images for VNFs</h3>
        <ul>
          <li>Step 1: Git clone the <a href="https://github.com/WatNFV/nf.io-docker-images" target="_blank">WatNFV/nf.io-docker-images</a> repository<br />
          <i>Note: You can skip this step if you are using the downloaded VM image. However, please update the VNF image specifications by running <code>git pull</code> inside the directory <code>nf.io-docker-images</code> before going to step 2</i><br />
          <code> git clone https://github.com/WatNFV/nf.io-docker-images.git</code></li>
          <li>Step 2: <code>cd</code> to a VNF directory, e.g., <code>cd ufw</code> and build the docker image following the provided <a href="https://github.com/WatNFV/nf.io-docker-images/tree/master/ufw" target="_blank">directions</a>. These directions may differ for different VNF types, so, follow the directions provided in each VNF's own directory.
        </ul>

      	<h3>Running nf.io</h3>
      	<ul>
      	  <li>Inside the <code>nf.io/src</code> directory run the following command:<br />
            <code>python nfio.py --nfio_root /vnfsroot --nfio_mount /nfio</code>
          </li>
          <li>Command line options for nfio.py can be seen by running the command<br />
            <code>python nfio.py -h</code><br>
              <pre>usage: nfio.py [-h] --nfio_root NFIO_ROOT --nfio_mount NFIO_MOUNT
               [--hypervisor HYPERVISOR]
               [--middlebox_module_root MIDDLEBOX_MODULE_ROOT]
               [--log_level LOG_LEVEL]

nf.io File System for NFV Orchestration

optional arguments:
  -h, --help            show this help message and exit
  --nfio_root NFIO_ROOT
                        Absolute path of nf.io root (default: None)
  --nfio_mount NFIO_MOUNT
                        Absolute path of nf.io mount point (default: None)
  --hypervisor HYPERVISOR
                        Hypervisor to use for VNF deployment (Docker/Libvirt)
                        (default: Docker)
  --middlebox_module_root MIDDLEBOX_MODULE_ROOT
                        Module directory inside the source tree containing
                        middlebox specific implementation of system calls
                        (default: middleboxes)
  --log_level LOG_LEVEL
                        [debug|info|warning|error] (default: info)

            </pre>
          </li>
        </ul>
      	
        <h3>nf.io Abstraction</h3>
      	<iframe id="gsframe" class="center-block" src="https://docs.google.com/presentation/d/1fkNCMb3TrKpDi2ryRRE_RXv46dGo3buZGJuqpXKbaWU/embed?start=false&loop=false&delayms=3000" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
        
        <h3>Deploy your first VNF using nf.io</h3>
        <ul>
          <li>Run <code>nfio.py</code> as shown above if it is not running already</li>
          <li>Build the docker image for a VNF, e.g., here we will use ufw as a firewall<br />
            <code>cd nf.io-docker-images/ufw</code><br />
            <code>docker build -t firewall .</code><br />
          </li>
          <li>Create a directory for firewall<br />
            <code>cd /nfio/nf-types</code><br />
            <code>mkdir firewall</code>
          </li>
          <li>Create a directory for a VNF instance<br />
            <code>cd firewall</code><br />
            <code>mkdir edge-ufw-1</code><br />
            The files and directories representing a firewall will be automatically created under the directory <code>edge-ufw-1</code>
          </li>
          <li>Provide the configurations required for deployment<br />
            <code>cd edge-ufw-1</code><br />
            <code>echo -n '127.0.0.1' &gt; machine/ip</code><br /> 
            <code>echo -n 'firewall' &gt; machine/vm.image</code><br />
            <i>Note: here <code>-n</code> is used with <code>echo</code> to avoid parsing issues with the <code>\n</code> character</i>.
          </li>
          <li>Deploy and start the VNF<br />
            <code>echo -n 'activate' &gt; action</code><br />
            Other possibles actions are: <br />
            <ul>
              <li><code>stop</code>&nbsp; stops a running VNF</li>
              <li><code>start</code>&nbsp; starts a stopped VNF</li>
              <li><code>destroy</code>&nbsp; destroys a running/stopped VNF</li>
            </ul>
          </li>
          <li>Get the current status of the VNF<br />
            <code>cat status && echo</code><br />
            <i>Note: a <code>\n</code> is not returned after the status (or any read data) to enable command pipes</i>
          </li>
          <li>Get the number of bytes transferred by this VNF<br />
            <code>cat stats/tx_bytes && echo</code>
          </li>
          <li>login to the deployed VNF<br />
            <code>ssh root@$(cat machine/vm.ip)</code><br />
            The default password is <code>pass</code>
          </li>
        </ul>
        
        <h3>Multi-host deployment</h3>
        <ul>
          <li>nf.io can be deployed on multiple hosts. One host will run the nfio.py program (nf.io-master) and the other hosts will run docker containers (nf.io-minions).</li>
          <li>On each minion it is required to active Docker remote API call by the following commands:<br />
            <code>sudo sed -i 's@.*DOCKER_OPTS=.*@DOCKER_OPTS="--ipv6=true -H unix:///var/run/docker.sock -H tcp://0.0.0.0:4444"@g' /etc/default/docker</code><br />
              <i>Note: we need to enable ipv6 network here as some VNFs (e.g., ufw) require ipv6 kernel modules.</i><br />
            Then restart the Docker daemon<br />
            <code>sudo service docker restart</code>
          </li>
          <li>nf.io-master can also serve as a nf.io-minion</li>
        </ul>
      </div>

    </div> <!-- /container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="ie10-viewport-bug-workaround.js"></script>
    <script>
      function update_gsframe_size() {
        var gsframe_width = Math.min($('.container').width()*0.9, 600);
        $('#gsframe').css('width', gsframe_width);
        $('#gsframe').css('height', 0.6*gsframe_width);
      }
      $( window ).resize(function() {
        update_gsframe_size();
      });
      $( document ).ready(function() {
        update_gsframe_size();
      });
    </script>
  </body>
</html>

